<div class="release d-flex h-100">
    <div id="release-bar" [ngClass]="{'release-open': active}" >
        <div class="d-flex flex-column h-100">
            <div class="release-bar-header text-center p-2 mt-4">
                <h1 class="bar-header-title">Active Releases</h1>
            </div>
            <div class="release-bar-body">
                <ul *ngIf="releases$ | async as releases" class="text-center">
                    <li
                        *ngFor="let release of releases, index as i"
                        class="
                            release-version
                            d-flex
                            justify-content-between
                            px-2
                        "
                        routerLinkActive="release-version-active" [routerLinkActiveOptions]="{exact: true}"
                    >
                        <div class="release-version-title flex-grow-1 d-flex">
                            <a class="d-flex justify-content-center" [routerLink]="[ '/workspaces', activeWorkspace.id, 'releases', release.ref.id ]">
                                <ngx-emoji class="px-2" [emoji]="release.emojiId" set="apple"></ngx-emoji>
                            
                            <span *ngIf="!editRelease[i]; else editReleaseVersionInputTemp">
                                {{ release.version }}
                            </span>
                            <ng-template #editReleaseVersionInputTemp>
                                <input
                                    (blur)="editReleaseVersion($event, i)"
                                    (keyup.enter)="editReleaseVersion($event, i)"
                                    #editReleaseVersionInput
                                    type="text"
                                    placeholder="{{ release.version }}"
                                />
                            </ng-template>
                            </a>
                        </div>
                        <div class="dropdown show">
                            <a
                                href="#"
                                role="button"
                                id="releaseDropdownMenu"
                                class="release-version-menu"
                                data-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false"
                            >
                                ...
                            </a>
    
                            <div
                                class="dropdown-menu edit-release"
                                aria-labelledby="releaseDropdownMenu"
                            >
                                <a
                                    class="dropdown-item"
                                    href="#"
                                    (click)="editReleaseVersion($event, i)"
                                    >Edit</a
                                >
                                <a class="dropdown-item" href="#" (click)="deleteRelease($event, i)" >Delete</a>
                            </div>
                        </div>
                    </li>
                    <li class="release-title">
                        <a
                            href="#"
                            *ngIf="!addRelease; else addReleaseInputTemp"
                            (click)="newRelease($event)"
                            >New Release +</a
                        >
                        <ng-template #addReleaseInputTemp>
                            <input
                                (blur)="newRelease($event)"
                                (keyup.enter)="newRelease($event)"
                                #addReleaseInput
                                type="text"
                                placeholder="release name?"
                            />
                        </ng-template>
                    </li>
                </ul>
            </div>
            <div
                class="
                    release-bar-footer
                    d-flex
                    align-items-end
                    flex-grow-1
                "
            >
            </div>
        </div>
    </div>
    <router-outlet></router-outlet>
</div>